{"ast":null,"code":"import { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport { dataLoader } from \"./DataLoader\";\nimport { JSONParser } from \"./JSONParser\";\nimport { CSVParser } from \"./CSVParser\";\nimport { BaseObjectEvents } from \"../Base\";\nimport { Adapter } from \"../utils/Adapter\";\nimport { Language } from \"../utils/Language\";\nimport { DateFormatter } from \"../formatters/DateFormatter\";\nimport { registry } from \"../Registry\";\nimport * as $type from \"../utils/Type\";\nimport * as $object from \"../utils/Object\";\n;\n;\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Represents a single data source - external file with all of its settings,\r\n * such as format, data parsing, etc.\r\n *\r\n * ```TypeScript\r\n * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n * chart.dataSource.parser = am4core.JSONParser;\r\n * ```\r\n * ```JavaScript\r\n * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n * chart.dataSource.parser = am4core.JSONParser;\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"dataSource\": {\r\n *     \"url\": \"http://www.myweb.com/data.json\",\r\n *     \"parser\": \"JSONParser\"\r\n *   },\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * @see {@link IDataSourceEvents} for a list of available events\r\n * @see {@link IDataSourceAdapters} for a list of available Adapters\r\n */\n\nvar DataSource =\n/** @class */\nfunction (_super) {\n  __extends(DataSource, _super);\n  /**\r\n   * Constructor\r\n   */\n\n\n  function DataSource(url, parser) {\n    var _this = // Init\n    _super.call(this) || this;\n    /**\r\n     * Adapter.\r\n     */\n\n\n    _this.adapter = new Adapter(_this);\n    /**\r\n     * Custom options for HTTP(S) request.\r\n     */\n\n    _this._requestOptions = {};\n    /**\r\n     * If set to `true`, any subsequent data loads will be considered incremental\r\n     * (containing only new data points that are supposed to be added to existing\r\n     * data).\r\n     *\r\n     * NOTE: this setting works only with element's `data` property. It won't\r\n     * work with any other externally-loadable data property.\r\n     *\r\n     * @default false\r\n     */\n\n    _this._incremental = false;\n    /**\r\n     * A collection of key/value pairs to attach to a data source URL when making\r\n     * an incremental request.\r\n     */\n\n    _this._incrementalParams = {};\n    /**\r\n     * This setting is used only when `incremental = true`. If set to `true`,\r\n     * it will try to retain the same number of data items across each load.\r\n     *\r\n     * E.g. if incremental load yeilded 5 new records, then 5 items from the\r\n     * beginning of data will be removed so that we end up with the same number\r\n     * of data items.\r\n     *\r\n     * @default false\r\n     */\n\n    _this._keepCount = false;\n    /**\r\n     * If set to `true`, each subsequent load will be treated as an update to\r\n     * currently loaded data, meaning that it will try to update values on\r\n     * existing data items, not overwrite the whole data.\r\n     *\r\n     * This will work faster than complete update, and also will animate the\r\n     * values to their new positions.\r\n     *\r\n     * Data sources across loads must contain the same number of data items.\r\n     *\r\n     * Loader will not truncate the data set if loaded data has fewer data items,\r\n     * and if it is longer, the excess data items will be ignored.\r\n     *\r\n     * @default false\r\n     * @since 4.5.5\r\n     */\n\n    _this._updateCurrentData = false;\n    /**\r\n     * Will show loading indicator when loading files.\r\n     */\n\n    _this.showPreloader = true;\n    _this.className = \"DataSource\"; // Set defaults\n\n    if (url) {\n      _this.url = url;\n    } // Set parser\n\n\n    if (parser) {\n      if (typeof parser == \"string\") {\n        _this.parser = dataLoader.getParserByType(parser);\n      } else {\n        _this.parser = parser;\n      }\n    }\n\n    return _this;\n  }\n  /**\r\n   * Processes the loaded data.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param data         Raw (unparsed) data\r\n   * @param contentType  Content type of the loaded data (optional)\r\n   */\n\n\n  DataSource.prototype.processData = function (data, contentType) {\n    // Parsing started\n    this.dispatchImmediately(\"parsestarted\"); // Check if parser is set\n\n    if (!this.parser) {\n      // Try to resolve from data\n      this.parser = dataLoader.getParserByData(data, contentType);\n\n      if (!this.parser) {\n        // We have a problem - nobody knows what to do with the data\n        // Raise error\n        if (this.events.isEnabled(\"parseerror\")) {\n          var event_1 = {\n            type: \"parseerror\",\n            message: this.language.translate(\"No parser available for file: %1\", null, this.url),\n            target: this\n          };\n          this.events.dispatchImmediately(\"parseerror\", event_1);\n        }\n\n        this.dispatchImmediately(\"parseended\");\n        return;\n      }\n    } // Apply options adapters\n\n\n    this.parser.options = this.adapter.apply(\"parserOptions\", this.parser.options);\n    this.parser.options.dateFields = this.adapter.apply(\"dateFields\", this.parser.options.dateFields || []);\n    this.parser.options.numberFields = this.adapter.apply(\"numberFields\", this.parser.options.numberFields || []); // Check if we need to pass in date formatter\n\n    if (this.parser.options.dateFields && !this.parser.options.dateFormatter) {\n      this.parser.options.dateFormatter = this.dateFormatter;\n    } // Parse\n\n\n    this.data = this.adapter.apply(\"parsedData\", this.parser.parse(this.adapter.apply(\"unparsedData\", data))); // Check for parsing errors\n\n    if (!$type.hasValue(this.data) && this.events.isEnabled(\"parseerror\")) {\n      var event_2 = {\n        type: \"parseerror\",\n        message: this.language.translate(\"Error parsing file: %1\", null, this.url),\n        target: this\n      };\n      this.events.dispatchImmediately(\"parseerror\", event_2);\n    } // Wrap up\n\n\n    this.dispatchImmediately(\"parseended\");\n\n    if ($type.hasValue(this.data)) {\n      this.dispatchImmediately(\"done\", {\n        \"data\": this.data\n      });\n    } // The component is responsible for updating its own data vtriggered via\n    // events.\n    // Update last data load\n\n\n    this.lastLoad = new Date();\n  };\n\n  Object.defineProperty(DataSource.prototype, \"url\", {\n    /**\r\n     * @return URL\r\n     */\n    get: function () {\n      // Get URL\n      var url = this.disableCache ? this.timestampUrl(this._url) : this._url; // Add incremental params\n\n      if (this.incremental && this.component.data.length) {\n        url = this.addUrlParams(url, this.incrementalParams);\n      }\n\n      return this.adapter.apply(\"url\", url);\n    },\n\n    /**\r\n     * URL of the data source.\r\n     *\r\n     * @param value  URL\r\n     */\n    set: function (value) {\n      this._url = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"requestOptions\", {\n    /**\r\n     * @return Options\r\n     */\n    get: function () {\n      return this.adapter.apply(\"requestOptions\", this._requestOptions);\n    },\n\n    /**\r\n     * Custom options for HTTP(S) request.\r\n     *\r\n     * At this moment the only option supported is: `requestHeaders`, which holds\r\n     * an array of objects for custom request headers, e.g.:\r\n     *\r\n     * ```TypeScript\r\n     * chart.dataSource.requestOptions.requestHeaders = [{\r\n     *   \"key\": \"x-access-token\",\r\n     *   \"value\": \"123456789\"\r\n     * }];\r\n     * ``````JavaScript\r\n     * chart.dataSource.requestOptions.requestHeaders = [{\r\n     *   \"key\": \"x-access-token\",\r\n     *   \"value\": \"123456789\"\r\n     * }];\r\n     * ```\r\n     * ```JSON\r\n     * {\r\n     *   // ...\r\n     *   \"dataSource\": {\r\n     *     // ...\r\n     *     \"requestOptions\": {\r\n     *       \"requestHeaders\": [{\r\n     *         \"key\": \"x-access-token\",\r\n     *         \"value\": \"123456789\"\r\n     *       }]\r\n     *     }\r\n     *   }\r\n     * }\r\n     * ```\r\n     *\r\n     * NOTE: setting this options on an-already loaded DataSource will not\r\n     * trigger a reload.\r\n     *\r\n     * @param value  Options\r\n     */\n    set: function (value) {\n      this._requestOptions = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"parser\", {\n    /**\r\n     * @return Data parser\r\n     */\n    get: function () {\n      if (!this._parser) {\n        this._parser = new JSONParser();\n      }\n\n      return this.adapter.apply(\"parser\", this._parser);\n    },\n\n    /**\r\n     * A parser to be used to parse data.\r\n     *\r\n     * ```TypeScript\r\n     * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n     * chart.dataSource.parser = am4core.JSONParser;\r\n     * ```\r\n     * ```JavaScript\r\n     * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n     * chart.dataSource.parser = am4core.JSONParser;\r\n     * ```\r\n     * ```JSON\r\n     * {\r\n     *   // ...\r\n     *   \"dataSource\": {\r\n     *     \"url\": \"http://www.myweb.com/data.json\",\r\n     *     \"parser\": {\r\n     *       \"type\": \"JSONParser\"\r\n     *     }\r\n     *   },\r\n     *   // ...\r\n     * }\r\n     * ```\r\n     *\r\n     * @default JSONParser\r\n     * @param value  Data parser\r\n     */\n    set: function (value) {\n      this._parser = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"reloadFrequency\", {\n    /**\r\n     * @return Reload frequency (ms)\r\n     */\n    get: function () {\n      return this.adapter.apply(\"reloadTimeout\", this._reloadFrequency);\n    },\n\n    /**\r\n     * Data source reload frequency.\r\n     *\r\n     * If set, it will reload the same URL every X milliseconds.\r\n     *\r\n     * @param value Reload frequency (ms)\r\n     */\n    set: function (value) {\n      var _this = this;\n\n      if (this._reloadFrequency != value) {\n        this._reloadFrequency = value; // Should we schedule a reload?\n\n        if (value) {\n          if (!$type.hasValue(this._reloadDisposer)) {\n            this._reloadDisposer = this.events.on(\"ended\", function (ev) {\n              _this._reloadTimeout = setTimeout(function () {\n                _this.load();\n              }, _this.reloadFrequency);\n            });\n          }\n        } else if ($type.hasValue(this._reloadDisposer)) {\n          this._reloadDisposer.dispose();\n\n          this._reloadDisposer = undefined;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"incremental\", {\n    /**\r\n     * @return Incremental load?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"incremental\", this._incremental);\n    },\n\n    /**\r\n     * Should subsequent reloads be treated as incremental?\r\n     *\r\n     * Incremental loads will assume that they contain only new data items\r\n     * since the last load.\r\n     *\r\n     * If `incremental = false` the loader will replace all of the target's\r\n     * data with each load.\r\n     *\r\n     * This setting does not have any effect trhe first time data is loaded.\r\n     *\r\n     * NOTE: this setting works only with element's `data` property. It won't\r\n     * work with any other externally-loadable data property.\r\n     *\r\n     * @default false\r\n     * @param Incremental load?\r\n     */\n    set: function (value) {\n      this._incremental = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"incrementalParams\", {\n    /**\r\n     * @return Incremental request parameters\r\n     */\n    get: function () {\n      return this.adapter.apply(\"incrementalParams\", this._incrementalParams);\n    },\n\n    /**\r\n     * An object consisting of key/value pairs to apply to an URL when data\r\n     * source is making an incremental request.\r\n     *\r\n     * @param value  Incremental request parameters\r\n     */\n    set: function (value) {\n      this._incrementalParams = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"keepCount\", {\n    /**\r\n     * @return keepCount load?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"keepCount\", this._keepCount);\n    },\n\n    /**\r\n     * This setting is used only when `incremental = true`. If set to `true`,\r\n     * it will try to retain the same number of data items across each load.\r\n     *\r\n     * E.g. if incremental load yeilded 5 new records, then 5 items from the\r\n     * beginning of data will be removed so that we end up with the same number\r\n     * of data items.\r\n     *\r\n     * @default false\r\n     * @param Keep record count?\r\n     */\n    set: function (value) {\n      this._keepCount = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"updateCurrentData\", {\n    /**\r\n     * @return Update current data?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"updateCurrentData\", this._updateCurrentData);\n    },\n\n    /**\r\n     * If set to `true`, each subsequent load will be treated as an update to\r\n     * currently loaded data, meaning that it will try to update values on\r\n     * existing data items, not overwrite the whole data.\r\n     *\r\n     * This will work faster than complete update, and also will animate the\r\n     * values to their new positions.\r\n     *\r\n     * Data sources across loads must contain the same number of data items.\r\n     *\r\n     * Loader will not truncate the data set if loaded data has fewer data items,\r\n     * and if it is longer, the excess data items will be ignored.\r\n     *\r\n     * NOTE: this setting is ignored if `incremental = true`.\r\n     *\r\n     * @default false\r\n     * @since 2.5.5\r\n     * @param Update current data?\r\n     */\n    set: function (value) {\n      this._updateCurrentData = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"language\", {\n    /**\r\n     * @return A [[Language]] instance to be used\r\n     */\n    get: function () {\n      if (this._language) {\n        return this._language;\n      } else if (this.component) {\n        this._language = this.component.language;\n        return this._language;\n      }\n\n      this.language = new Language();\n      return this.language;\n    },\n\n    /**\r\n     * Language instance to use.\r\n     *\r\n     * Will inherit and use chart's language, if not set.\r\n     *\r\n     * @param value An instance of Language\r\n     */\n    set: function (value) {\n      this._language = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataSource.prototype, \"dateFormatter\", {\n    /**\r\n     * @return A [[DateFormatter]] instance to be used\r\n     */\n    get: function () {\n      if (this._dateFormatter) {\n        return this._dateFormatter;\n      } else if (this.component) {\n        this._dateFormatter = this.component.dateFormatter;\n        return this._dateFormatter;\n      }\n\n      this.dateFormatter = new DateFormatter();\n      return this.dateFormatter;\n    },\n\n    /**\r\n     * A [[DateFormatter]] to use when parsing dates from string formats.\r\n     *\r\n     * Will inherit and use chart's DateFormatter if not ser.\r\n     *\r\n     * @param value An instance of [[DateFormatter]]\r\n     */\n    set: function (value) {\n      this._dateFormatter = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Adds current timestamp to the URL.\r\n   *\r\n   * @param url  Source URL\r\n   * @return Timestamped URL\r\n   */\n\n  DataSource.prototype.timestampUrl = function (url) {\n    var tstamp = new Date().getTime().toString();\n    var params = {};\n    params[tstamp] = \"\";\n    return this.addUrlParams(url, params);\n  };\n  /**\r\n   * Disposes of this object.\r\n   */\n\n\n  DataSource.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    if (this._reloadTimeout) {\n      clearTimeout(this._reloadTimeout);\n    }\n\n    if ($type.hasValue(this._reloadDisposer)) {\n      this._reloadDisposer.dispose();\n\n      this._reloadDisposer = undefined;\n    }\n  };\n  /**\r\n   * Initiate the load.\r\n   *\r\n   * All loading in JavaScript is asynchronous. This function will trigger the\r\n   * load and will exit immediately.\r\n   *\r\n   * Use DataSource's events to watch for loaded data and errors.\r\n   */\n\n\n  DataSource.prototype.load = function () {\n    if (this.url) {\n      if (this._reloadTimeout) {\n        clearTimeout(this._reloadTimeout);\n      }\n\n      dataLoader.load(this);\n    }\n  };\n  /**\r\n   * Adds parameters to `url` as query strings. Will take care of proper\r\n   * separators.\r\n   *\r\n   * @param url     Source URL\r\n   * @param params  Parameters\r\n   * @return New URL\r\n   */\n\n\n  DataSource.prototype.addUrlParams = function (url, params) {\n    var join = url.match(/\\?/) ? \"&\" : \"?\";\n    var add = [];\n    $object.each(params, function (key, value) {\n      if (value != \"\") {\n        add.push(key + \"=\" + encodeURIComponent(value));\n      } else {\n        add.push(key);\n      }\n    });\n\n    if (add.length) {\n      return url + join + add.join(\"&\");\n    }\n\n    return url;\n  };\n  /**\r\n   * Processes JSON-based config before it is applied to the object.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param config  Config\r\n   */\n\n\n  DataSource.prototype.processConfig = function (config) {\n    registry.registeredClasses[\"json\"] = JSONParser;\n    registry.registeredClasses[\"JSONParser\"] = JSONParser;\n    registry.registeredClasses[\"csv\"] = CSVParser;\n    registry.registeredClasses[\"CSVParser\"] = CSVParser;\n\n    _super.prototype.processConfig.call(this, config);\n  };\n\n  return DataSource;\n}(BaseObjectEvents);\n\nexport { DataSource };","map":{"version":3,"sources":["/home/unutu/go/src/github.com/thteam47/admin-portal/node_modules/@amcharts/amcharts4/.internal/core/data/DataSource.js"],"names":["__extends","dataLoader","JSONParser","CSVParser","BaseObjectEvents","Adapter","Language","DateFormatter","registry","$type","$object","DataSource","_super","url","parser","_this","call","adapter","_requestOptions","_incremental","_incrementalParams","_keepCount","_updateCurrentData","showPreloader","className","getParserByType","prototype","processData","data","contentType","dispatchImmediately","getParserByData","events","isEnabled","event_1","type","message","language","translate","target","options","apply","dateFields","numberFields","dateFormatter","parse","hasValue","event_2","lastLoad","Date","Object","defineProperty","get","disableCache","timestampUrl","_url","incremental","component","length","addUrlParams","incrementalParams","set","value","enumerable","configurable","_parser","_reloadFrequency","_reloadDisposer","on","ev","_reloadTimeout","setTimeout","load","reloadFrequency","dispose","undefined","_language","_dateFormatter","tstamp","getTime","toString","params","clearTimeout","join","match","add","each","key","push","encodeURIComponent","processConfig","config","registeredClasses"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,gBAAT,QAAiC,SAAjC;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAO,KAAKC,KAAZ,MAAuB,eAAvB;AACA,OAAO,KAAKC,OAAZ,MAAyB,iBAAzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,UAAU;AAAG;AAAe,UAAUC,MAAV,EAAkB;AAC9CZ,EAAAA,SAAS,CAACW,UAAD,EAAaC,MAAb,CAAT;AACA;AACJ;AACA;;;AACI,WAASD,UAAT,CAAoBE,GAApB,EAAyBC,MAAzB,EAAiC;AAC7B,QAAIC,KAAK,GACT;AACAH,IAAAA,MAAM,CAACI,IAAP,CAAY,IAAZ,KAAqB,IAFrB;AAGA;AACR;AACA;;;AACQD,IAAAA,KAAK,CAACE,OAAN,GAAgB,IAAIZ,OAAJ,CAAYU,KAAZ,CAAhB;AACA;AACR;AACA;;AACQA,IAAAA,KAAK,CAACG,eAAN,GAAwB,EAAxB;AACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACQH,IAAAA,KAAK,CAACI,YAAN,GAAqB,KAArB;AACA;AACR;AACA;AACA;;AACQJ,IAAAA,KAAK,CAACK,kBAAN,GAA2B,EAA3B;AACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACQL,IAAAA,KAAK,CAACM,UAAN,GAAmB,KAAnB;AACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","sourcesContent":["import { __extends } from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { dataLoader } from \"./DataLoader\";\r\nimport { JSONParser } from \"./JSONParser\";\r\nimport { CSVParser } from \"./CSVParser\";\r\nimport { BaseObjectEvents } from \"../Base\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport { Language } from \"../utils/Language\";\r\nimport { DateFormatter } from \"../formatters/DateFormatter\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $type from \"../utils/Type\";\r\nimport * as $object from \"../utils/Object\";\r\n;\r\n;\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Represents a single data source - external file with all of its settings,\r\n * such as format, data parsing, etc.\r\n *\r\n * ```TypeScript\r\n * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n * chart.dataSource.parser = am4core.JSONParser;\r\n * ```\r\n * ```JavaScript\r\n * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n * chart.dataSource.parser = am4core.JSONParser;\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"dataSource\": {\r\n *     \"url\": \"http://www.myweb.com/data.json\",\r\n *     \"parser\": \"JSONParser\"\r\n *   },\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * @see {@link IDataSourceEvents} for a list of available events\r\n * @see {@link IDataSourceAdapters} for a list of available Adapters\r\n */\r\nvar DataSource = /** @class */ (function (_super) {\r\n    __extends(DataSource, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function DataSource(url, parser) {\r\n        var _this = \r\n        // Init\r\n        _super.call(this) || this;\r\n        /**\r\n         * Adapter.\r\n         */\r\n        _this.adapter = new Adapter(_this);\r\n        /**\r\n         * Custom options for HTTP(S) request.\r\n         */\r\n        _this._requestOptions = {};\r\n        /**\r\n         * If set to `true`, any subsequent data loads will be considered incremental\r\n         * (containing only new data points that are supposed to be added to existing\r\n         * data).\r\n         *\r\n         * NOTE: this setting works only with element's `data` property. It won't\r\n         * work with any other externally-loadable data property.\r\n         *\r\n         * @default false\r\n         */\r\n        _this._incremental = false;\r\n        /**\r\n         * A collection of key/value pairs to attach to a data source URL when making\r\n         * an incremental request.\r\n         */\r\n        _this._incrementalParams = {};\r\n        /**\r\n         * This setting is used only when `incremental = true`. If set to `true`,\r\n         * it will try to retain the same number of data items across each load.\r\n         *\r\n         * E.g. if incremental load yeilded 5 new records, then 5 items from the\r\n         * beginning of data will be removed so that we end up with the same number\r\n         * of data items.\r\n         *\r\n         * @default false\r\n         */\r\n        _this._keepCount = false;\r\n        /**\r\n         * If set to `true`, each subsequent load will be treated as an update to\r\n         * currently loaded data, meaning that it will try to update values on\r\n         * existing data items, not overwrite the whole data.\r\n         *\r\n         * This will work faster than complete update, and also will animate the\r\n         * values to their new positions.\r\n         *\r\n         * Data sources across loads must contain the same number of data items.\r\n         *\r\n         * Loader will not truncate the data set if loaded data has fewer data items,\r\n         * and if it is longer, the excess data items will be ignored.\r\n         *\r\n         * @default false\r\n         * @since 4.5.5\r\n         */\r\n        _this._updateCurrentData = false;\r\n        /**\r\n         * Will show loading indicator when loading files.\r\n         */\r\n        _this.showPreloader = true;\r\n        _this.className = \"DataSource\";\r\n        // Set defaults\r\n        if (url) {\r\n            _this.url = url;\r\n        }\r\n        // Set parser\r\n        if (parser) {\r\n            if (typeof parser == \"string\") {\r\n                _this.parser = dataLoader.getParserByType(parser);\r\n            }\r\n            else {\r\n                _this.parser = parser;\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Processes the loaded data.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param data         Raw (unparsed) data\r\n     * @param contentType  Content type of the loaded data (optional)\r\n     */\r\n    DataSource.prototype.processData = function (data, contentType) {\r\n        // Parsing started\r\n        this.dispatchImmediately(\"parsestarted\");\r\n        // Check if parser is set\r\n        if (!this.parser) {\r\n            // Try to resolve from data\r\n            this.parser = dataLoader.getParserByData(data, contentType);\r\n            if (!this.parser) {\r\n                // We have a problem - nobody knows what to do with the data\r\n                // Raise error\r\n                if (this.events.isEnabled(\"parseerror\")) {\r\n                    var event_1 = {\r\n                        type: \"parseerror\",\r\n                        message: this.language.translate(\"No parser available for file: %1\", null, this.url),\r\n                        target: this\r\n                    };\r\n                    this.events.dispatchImmediately(\"parseerror\", event_1);\r\n                }\r\n                this.dispatchImmediately(\"parseended\");\r\n                return;\r\n            }\r\n        }\r\n        // Apply options adapters\r\n        this.parser.options = this.adapter.apply(\"parserOptions\", this.parser.options);\r\n        this.parser.options.dateFields = this.adapter.apply(\"dateFields\", this.parser.options.dateFields || []);\r\n        this.parser.options.numberFields = this.adapter.apply(\"numberFields\", this.parser.options.numberFields || []);\r\n        // Check if we need to pass in date formatter\r\n        if (this.parser.options.dateFields && !this.parser.options.dateFormatter) {\r\n            this.parser.options.dateFormatter = this.dateFormatter;\r\n        }\r\n        // Parse\r\n        this.data = this.adapter.apply(\"parsedData\", this.parser.parse(this.adapter.apply(\"unparsedData\", data)));\r\n        // Check for parsing errors\r\n        if (!$type.hasValue(this.data) && this.events.isEnabled(\"parseerror\")) {\r\n            var event_2 = {\r\n                type: \"parseerror\",\r\n                message: this.language.translate(\"Error parsing file: %1\", null, this.url),\r\n                target: this\r\n            };\r\n            this.events.dispatchImmediately(\"parseerror\", event_2);\r\n        }\r\n        // Wrap up\r\n        this.dispatchImmediately(\"parseended\");\r\n        if ($type.hasValue(this.data)) {\r\n            this.dispatchImmediately(\"done\", {\r\n                \"data\": this.data\r\n            });\r\n        }\r\n        // The component is responsible for updating its own data vtriggered via\r\n        // events.\r\n        // Update last data load\r\n        this.lastLoad = new Date();\r\n    };\r\n    Object.defineProperty(DataSource.prototype, \"url\", {\r\n        /**\r\n         * @return URL\r\n         */\r\n        get: function () {\r\n            // Get URL\r\n            var url = this.disableCache\r\n                ? this.timestampUrl(this._url)\r\n                : this._url;\r\n            // Add incremental params\r\n            if (this.incremental && this.component.data.length) {\r\n                url = this.addUrlParams(url, this.incrementalParams);\r\n            }\r\n            return this.adapter.apply(\"url\", url);\r\n        },\r\n        /**\r\n         * URL of the data source.\r\n         *\r\n         * @param value  URL\r\n         */\r\n        set: function (value) {\r\n            this._url = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"requestOptions\", {\r\n        /**\r\n         * @return Options\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"requestOptions\", this._requestOptions);\r\n        },\r\n        /**\r\n         * Custom options for HTTP(S) request.\r\n         *\r\n         * At this moment the only option supported is: `requestHeaders`, which holds\r\n         * an array of objects for custom request headers, e.g.:\r\n         *\r\n         * ```TypeScript\r\n         * chart.dataSource.requestOptions.requestHeaders = [{\r\n         *   \"key\": \"x-access-token\",\r\n         *   \"value\": \"123456789\"\r\n         * }];\r\n         * ``````JavaScript\r\n         * chart.dataSource.requestOptions.requestHeaders = [{\r\n         *   \"key\": \"x-access-token\",\r\n         *   \"value\": \"123456789\"\r\n         * }];\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"dataSource\": {\r\n         *     // ...\r\n         *     \"requestOptions\": {\r\n         *       \"requestHeaders\": [{\r\n         *         \"key\": \"x-access-token\",\r\n         *         \"value\": \"123456789\"\r\n         *       }]\r\n         *     }\r\n         *   }\r\n         * }\r\n         * ```\r\n         *\r\n         * NOTE: setting this options on an-already loaded DataSource will not\r\n         * trigger a reload.\r\n         *\r\n         * @param value  Options\r\n         */\r\n        set: function (value) {\r\n            this._requestOptions = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"parser\", {\r\n        /**\r\n         * @return Data parser\r\n         */\r\n        get: function () {\r\n            if (!this._parser) {\r\n                this._parser = new JSONParser();\r\n            }\r\n            return this.adapter.apply(\"parser\", this._parser);\r\n        },\r\n        /**\r\n         * A parser to be used to parse data.\r\n         *\r\n         * ```TypeScript\r\n         * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n         * chart.dataSource.parser = am4core.JSONParser;\r\n         * ```\r\n         * ```JavaScript\r\n         * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n         * chart.dataSource.parser = am4core.JSONParser;\r\n         * ```\r\n         * ```JSON\r\n         * {\r\n         *   // ...\r\n         *   \"dataSource\": {\r\n         *     \"url\": \"http://www.myweb.com/data.json\",\r\n         *     \"parser\": {\r\n         *       \"type\": \"JSONParser\"\r\n         *     }\r\n         *   },\r\n         *   // ...\r\n         * }\r\n         * ```\r\n         *\r\n         * @default JSONParser\r\n         * @param value  Data parser\r\n         */\r\n        set: function (value) {\r\n            this._parser = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"reloadFrequency\", {\r\n        /**\r\n         * @return Reload frequency (ms)\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"reloadTimeout\", this._reloadFrequency);\r\n        },\r\n        /**\r\n         * Data source reload frequency.\r\n         *\r\n         * If set, it will reload the same URL every X milliseconds.\r\n         *\r\n         * @param value Reload frequency (ms)\r\n         */\r\n        set: function (value) {\r\n            var _this = this;\r\n            if (this._reloadFrequency != value) {\r\n                this._reloadFrequency = value;\r\n                // Should we schedule a reload?\r\n                if (value) {\r\n                    if (!$type.hasValue(this._reloadDisposer)) {\r\n                        this._reloadDisposer = this.events.on(\"ended\", function (ev) {\r\n                            _this._reloadTimeout = setTimeout(function () {\r\n                                _this.load();\r\n                            }, _this.reloadFrequency);\r\n                        });\r\n                    }\r\n                }\r\n                else if ($type.hasValue(this._reloadDisposer)) {\r\n                    this._reloadDisposer.dispose();\r\n                    this._reloadDisposer = undefined;\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"incremental\", {\r\n        /**\r\n         * @return Incremental load?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"incremental\", this._incremental);\r\n        },\r\n        /**\r\n         * Should subsequent reloads be treated as incremental?\r\n         *\r\n         * Incremental loads will assume that they contain only new data items\r\n         * since the last load.\r\n         *\r\n         * If `incremental = false` the loader will replace all of the target's\r\n         * data with each load.\r\n         *\r\n         * This setting does not have any effect trhe first time data is loaded.\r\n         *\r\n         * NOTE: this setting works only with element's `data` property. It won't\r\n         * work with any other externally-loadable data property.\r\n         *\r\n         * @default false\r\n         * @param Incremental load?\r\n         */\r\n        set: function (value) {\r\n            this._incremental = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"incrementalParams\", {\r\n        /**\r\n         * @return Incremental request parameters\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"incrementalParams\", this._incrementalParams);\r\n        },\r\n        /**\r\n         * An object consisting of key/value pairs to apply to an URL when data\r\n         * source is making an incremental request.\r\n         *\r\n         * @param value  Incremental request parameters\r\n         */\r\n        set: function (value) {\r\n            this._incrementalParams = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"keepCount\", {\r\n        /**\r\n         * @return keepCount load?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"keepCount\", this._keepCount);\r\n        },\r\n        /**\r\n         * This setting is used only when `incremental = true`. If set to `true`,\r\n         * it will try to retain the same number of data items across each load.\r\n         *\r\n         * E.g. if incremental load yeilded 5 new records, then 5 items from the\r\n         * beginning of data will be removed so that we end up with the same number\r\n         * of data items.\r\n         *\r\n         * @default false\r\n         * @param Keep record count?\r\n         */\r\n        set: function (value) {\r\n            this._keepCount = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"updateCurrentData\", {\r\n        /**\r\n         * @return Update current data?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"updateCurrentData\", this._updateCurrentData);\r\n        },\r\n        /**\r\n         * If set to `true`, each subsequent load will be treated as an update to\r\n         * currently loaded data, meaning that it will try to update values on\r\n         * existing data items, not overwrite the whole data.\r\n         *\r\n         * This will work faster than complete update, and also will animate the\r\n         * values to their new positions.\r\n         *\r\n         * Data sources across loads must contain the same number of data items.\r\n         *\r\n         * Loader will not truncate the data set if loaded data has fewer data items,\r\n         * and if it is longer, the excess data items will be ignored.\r\n         *\r\n         * NOTE: this setting is ignored if `incremental = true`.\r\n         *\r\n         * @default false\r\n         * @since 2.5.5\r\n         * @param Update current data?\r\n         */\r\n        set: function (value) {\r\n            this._updateCurrentData = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"language\", {\r\n        /**\r\n         * @return A [[Language]] instance to be used\r\n         */\r\n        get: function () {\r\n            if (this._language) {\r\n                return this._language;\r\n            }\r\n            else if (this.component) {\r\n                this._language = this.component.language;\r\n                return this._language;\r\n            }\r\n            this.language = new Language();\r\n            return this.language;\r\n        },\r\n        /**\r\n         * Language instance to use.\r\n         *\r\n         * Will inherit and use chart's language, if not set.\r\n         *\r\n         * @param value An instance of Language\r\n         */\r\n        set: function (value) {\r\n            this._language = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DataSource.prototype, \"dateFormatter\", {\r\n        /**\r\n         * @return A [[DateFormatter]] instance to be used\r\n         */\r\n        get: function () {\r\n            if (this._dateFormatter) {\r\n                return this._dateFormatter;\r\n            }\r\n            else if (this.component) {\r\n                this._dateFormatter = this.component.dateFormatter;\r\n                return this._dateFormatter;\r\n            }\r\n            this.dateFormatter = new DateFormatter();\r\n            return this.dateFormatter;\r\n        },\r\n        /**\r\n         * A [[DateFormatter]] to use when parsing dates from string formats.\r\n         *\r\n         * Will inherit and use chart's DateFormatter if not ser.\r\n         *\r\n         * @param value An instance of [[DateFormatter]]\r\n         */\r\n        set: function (value) {\r\n            this._dateFormatter = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds current timestamp to the URL.\r\n     *\r\n     * @param url  Source URL\r\n     * @return Timestamped URL\r\n     */\r\n    DataSource.prototype.timestampUrl = function (url) {\r\n        var tstamp = new Date().getTime().toString();\r\n        var params = {};\r\n        params[tstamp] = \"\";\r\n        return this.addUrlParams(url, params);\r\n    };\r\n    /**\r\n     * Disposes of this object.\r\n     */\r\n    DataSource.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        if (this._reloadTimeout) {\r\n            clearTimeout(this._reloadTimeout);\r\n        }\r\n        if ($type.hasValue(this._reloadDisposer)) {\r\n            this._reloadDisposer.dispose();\r\n            this._reloadDisposer = undefined;\r\n        }\r\n    };\r\n    /**\r\n     * Initiate the load.\r\n     *\r\n     * All loading in JavaScript is asynchronous. This function will trigger the\r\n     * load and will exit immediately.\r\n     *\r\n     * Use DataSource's events to watch for loaded data and errors.\r\n     */\r\n    DataSource.prototype.load = function () {\r\n        if (this.url) {\r\n            if (this._reloadTimeout) {\r\n                clearTimeout(this._reloadTimeout);\r\n            }\r\n            dataLoader.load(this);\r\n        }\r\n    };\r\n    /**\r\n     * Adds parameters to `url` as query strings. Will take care of proper\r\n     * separators.\r\n     *\r\n     * @param url     Source URL\r\n     * @param params  Parameters\r\n     * @return New URL\r\n     */\r\n    DataSource.prototype.addUrlParams = function (url, params) {\r\n        var join = url.match(/\\?/) ? \"&\" : \"?\";\r\n        var add = [];\r\n        $object.each(params, function (key, value) {\r\n            if (value != \"\") {\r\n                add.push(key + \"=\" + encodeURIComponent(value));\r\n            }\r\n            else {\r\n                add.push(key);\r\n            }\r\n        });\r\n        if (add.length) {\r\n            return url + join + add.join(\"&\");\r\n        }\r\n        return url;\r\n    };\r\n    /**\r\n     * Processes JSON-based config before it is applied to the object.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param config  Config\r\n     */\r\n    DataSource.prototype.processConfig = function (config) {\r\n        registry.registeredClasses[\"json\"] = JSONParser;\r\n        registry.registeredClasses[\"JSONParser\"] = JSONParser;\r\n        registry.registeredClasses[\"csv\"] = CSVParser;\r\n        registry.registeredClasses[\"CSVParser\"] = CSVParser;\r\n        _super.prototype.processConfig.call(this, config);\r\n    };\r\n    return DataSource;\r\n}(BaseObjectEvents));\r\nexport { DataSource };\r\n"]},"metadata":{},"sourceType":"module"}