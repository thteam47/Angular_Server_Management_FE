!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("xterm"),require("xterm-addon-fit"),require("rxjs"),require("angular-resizable-element"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-terminal",["exports","@angular/core","xterm","xterm-addon-fit","rxjs","angular-resizable-element","@angular/common"],t):t((e=e||self)["ng-terminal"]={},e.ng.core,e.xterm,e.xtermAddonFit,e.rxjs,e.angularResizableElement,e.ng.common)}(this,(function(e,t,n,i,r,o,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}var l=function(){function e(){}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),u=function(){function e(){this.keyInputSubject=new r.Subject,this.keyEventSubject=new r.Subject,this.termSnippetSubject=new r.Subject,this.afterViewInitSubject=new r.Subject,this.h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),this.displayOption={},this.terminalStyle={},this.keyInputEmitter=new t.EventEmitter,this.keyEventEmitter=new t.EventEmitter,this.termSnippetSubscription=r.combineLatest(this.termSnippetSubject,this.afterViewInitSubject).subscribe((function(e){(0,a(e,1)[0])()}))}return Object.defineProperty(e.prototype,"_dataSource",{get:function(){return this.dataSource},set:function(e){var t=this;null!=this.dataSourceSubscription&&this.dataSourceSubscription.unsubscribe(),this.dataSource=e,this.dataSourceSubscription=this.dataSource.subscribe((function(e){t.write(e)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_displayOption",{set:function(e){this.setDisplayOption(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_style",{set:function(e){this.setStyle(e)},enumerable:!0,configurable:!0}),e.prototype.observableSetup=function(){var e=this;this.term.onData((function(t){e.keyInputSubject.next(t)})),this.term.onKey((function(t){e.keyEventSubject.next(t)})),this.keyInputSubjectSubscription=this.keyInputSubject.subscribe((function(t){e.keyInputEmitter.emit(t)})),this.keyEventSubjectSubscription=this.keyEventSubject.subscribe((function(t){e.keyEventEmitter.emit(t)})),this.afterViewInitSubject.next()},e.prototype.setTerminalBlock=function(e){this.terminalStyle.display=e?"block":"inline-block"},e.prototype.setTerminalDimensions=function(e,t,n,i){this.terminalStyle.left=e?e+"px":void 0,this.terminalStyle.top=t?t+"px":void 0,this.terminalStyle.width=n?n+"px":void 0,this.terminalStyle.height=i?i+"px":void 0},e.prototype.removeTerminalDimensions=function(){this.terminalStyle.left=void 0,this.terminalStyle.top=void 0,this.terminalStyle.width=void 0,this.terminalStyle.height=void 0},e.prototype.setStyle=function(e){Object.assign(this.terminalStyle,e)},e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewChecked=function(){var e=this.fitAddon.proposeDimensions();if(void 0===e||isNaN(e.rows)||e.rows==1/0||isNaN(e.cols)||e.cols==1/0)this.term.resize(10,10);else if(this.displayOption.fixedGrid){this.term.resize(this.displayOption.fixedGrid.cols,this.displayOption.fixedGrid.rows);var t=this.term.element.getElementsByClassName("xterm-screen")[0],n=this.term.element.getElementsByClassName("xterm-scroll-area")[0],i=this.term.element,r=t.clientWidth,o=i.clientWidth-n.clientWidth;this.setTerminalDimensions(void 0,void 0,r+o,void 0)}else this.fitAddon.fit()},e.prototype.ngAfterViewInit=function(){this.fitAddon=new i.FitAddon,this.term=new n.Terminal,this.term.open(this.terminalDiv.nativeElement),this.term.loadAddon(this.fitAddon),this.observableSetup()},e.prototype.ngOnDestroy=function(){this.keyInputSubjectSubscription&&this.keyInputSubjectSubscription.unsubscribe(),this.dataSourceSubscription&&this.dataSourceSubscription.unsubscribe(),this.keyEventSubjectSubscription&&this.keyEventSubjectSubscription.unsubscribe(),this.termSnippetSubscription&&this.termSnippetSubscription.unsubscribe(),this.term&&this.term.dispose()},e.prototype.write=function(e){this.term.write(e)},e.prototype.setDisplayOption=function(e){e?(null!=e.fixedGrid?(console.debug("resizable will be ignored."),this.setTerminalBlock(!1),this.removeTerminalDimensions()):this.setTerminalBlock(!0),this.displayOption=e):console.warn("A falsy option is not allowed")},Object.defineProperty(e.prototype,"keyInput",{get:function(){return this.keyInputSubject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyEventInput",{get:function(){return this.keyEventSubject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"underlying",{get:function(){return this.term},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDraggableOnEdgeActivated",{get:function(){return null!=this.displayOption.activateDraggableOnEdge&&null==this.displayOption.fixedGrid},enumerable:!0,configurable:!0}),e.prototype.onResizeEnd=function(e,t,n,i){this.setTerminalDimensions(e,t,n,i)},e.prototype.validatorFactory=function(){var e=this;return(function(t){var n=e.displayOption;if(n.activateDraggableOnEdge){t.rectangle.left,t.rectangle.top;var i=t.rectangle.width,r=t.rectangle.height;return!(i<n.activateDraggableOnEdge.minWidth||r<n.activateDraggableOnEdge.minHeight)}})},e.decorators=[{type:t.Component,args:[{selector:"ng-terminal",template:'<global-style></global-style>\n\n<div #terminal class="terminal-outer" mwlResizable [ngStyle]="terminalStyle" [validateResize]="validatorFactory()" [enableGhostResize]="true" [resizeEdges]="isDraggableOnEdgeActivated ? {bottom: true, right: true} : {bottom: false, right: false}"\n(resizeEnd)="onResizeEnd($event.rectangle.left, $event.rectangle.top, $event.rectangle.width, $event.rectangle.height)">\n</div>',styles:[".terminal-outer{box-sizing:border-box;height:100%}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={_dataSource:[{type:t.Input,args:["dataSource"]}],_displayOption:[{type:t.Input,args:["displayOption"]}],_style:[{type:t.Input,args:["style"]}],keyInputEmitter:[{type:t.Output,args:["keyInput"]}],keyEventEmitter:[{type:t.Output,args:["keyEvent"]}],terminalDiv:[{type:t.ViewChild,args:["terminal",{static:!0}]}]},e}();var c=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"global-style",template:"",encapsulation:t.ViewEncapsulation.None,styles:[".xterm{position:relative;-moz-user-select:none;user-select:none;-ms-user-select:none;-webkit-user-select:none;cursor:text}.xterm.focus,.xterm:focus{outline:0}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;right:0;left:0;top:0;bottom:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility,.xterm .xterm-message{position:absolute;left:0;top:0;bottom:0;right:0;z-index:10;color:transparent}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:.5}.xterm-underline{text-decoration:underline}.xterm-strikethrough{text-decoration:line-through}"]}]}],e.ctorParameters=function(){return[]},e}(),p=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[u,c],imports:[o.ResizableModule,s.CommonModule],exports:[u]}]}],e}(),m=function(){function e(){}return e.insertBlank=function(e){return""+e+"@"},e.cursorUp=function(e){return""+e+"A"},e.cursorDown=function(e){return""+e+"B"},e.cursorForward=function(e){return""+e+"C"},e.cursorBackward=function(e){return""+e+"D"},e.cursorNextLine=function(e){return""+e+"E"},e.cursorPrecedingLine=function(e){return""+e+"F"},e.cursorColumn=function(e){return""+e+"G"},e.cursorPosition=function(e,t){return""+e+";"+t+"H"},e.eraseInDisplay=function(e){return""+e+"J"},e.eraseSelectiveThingsInDisplay=function(e){return"?"+e+"J"},e.eraseInLine=function(e){return""+e+"K"},e.eraseSelectiveThingsInLine=function(e){return"?"+e+"K"},e.insertLines=function(e){return""+e+"L"},e.deleteLines=function(e){return""+e+"M"},e.deleteCharacter=function(e){return""+e+"P"},e.scrollUpLines=function(e){return""+e+"S"},e.scrollDownLines=function(e){return""+e+"T"},e.eraseCharacters=function(e){return""+e+"X"},e}(),d={Below:0,Above:1,All:2,SavedLines:3};d[d.Below]="Below",d[d.Above]="Above",d[d.All]="All",d[d.SavedLines]="SavedLines";var f={Right:0,Left:1,All:2};f[f.Right]="Right",f[f.Left]="Left",f[f.All]="All",e.FunctionsUsingCSI=m,e.KindOfEraseInDisplay=d,e.KindOfEraseInLine=f,e.NgTerminalComponent=u,e.NgTerminalModule=p,e.NgTerminalService=l,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-terminal.umd.min.js.map